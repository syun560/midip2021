{"version":3,"sources":["midip/Lib.js","midip/ChordPlayerCell.js","midip/ChordPlayer.js","midip/Instrument.js","midip/Store.js","midip/PianoRollCell.js","midip/PianoRoll.js","midip/NotePane.js","midip/Player.js","midip/Conductor.js","midip/ChannelSelector.js","midip/ProgramChanger.js","midip/Sequencer.js","App.js","reportWebVitals.js","index.js"],"names":["Lib","num","base","Math","floor","toString","name","chordPattern","baseName","chordName","substr","baseNote","indexOf","chord","noteEvents","map","offset","push","note","vel","gateMs","ChordPlayerCell","props","state","doClick","bind","this","chordNameToNoteEvents","noteEvent","dispatch","type","data","style","diff","nowKey","index","background","cursor","onClick","Component","connect","ChordPlayer","circleOfFifthKey","circleOfFifthMajor","circleOfFifthMinor","createStyle","e","key","target","getAttribute","setState","item0","data-key","item1","item2","className","Instrument","message","inPorts","outPorts","selectedOutPortID","selectedInPortID","navigator","requestMIDIAccess","sysex","then","midiAccess","inputIterator","inputs","values","input","next","done","value","ID","id","addEventListener","inputEvent","length","outputs","output","device","get","console","log","msg","doChange","numArray","forEach","val","join","send","window","performance","now","n","in_items","out_items","onChange","defaultValue","initData","mea","channel","channelData","program","sortNotes","arr","sort","a","b","tick","midipReducer","action","new_data","slice","del_data","filter","ch","undefined","programNumber","newChannelData","createStore","PianoRollCell","tdUnselected","width","tdSelected","border","borderLeft","selected","doMouseEnter","isSingle","buttons","gate","sameTickEvents","isPreview","noteNum","row","col","findData","find","onMouseEnter","data-row","data-col","PianoRoll","box","height","overflow","userSelect","th","changeBaseKey","changeMea","changeSingle","changePreview","rollStyle","ref","React","createRef","checked","current","scrollIntoView","block","notes","i","ticks","rows","fuga","indexRow","noteNumberToNoteName","hoge","indexCol","min","max","NotePane","noteItem","Player","Conductor","td","tdNow","maxTick","bpm","nowTick","isPlaying","isLoop","isSolo","PlayToggle","Proceed","ChangeBPM","ChangeLoop","ChangeSolo","ChangeTick","clearTimeout","timer","Play","setTimeout","d","nextTick","delayTime","data-tick","ChannelSelector","channelName","ChangeSelector","items","ProgramChanger","programName","Sequencer","persistConfig","storage","blacklist","whitelist","persistedReducer","persistReducer","store","pstore","persistStore","App","loading","persistor","href","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"8PA6DeA,E,yGA3DX,SAA4BC,GACxB,IACMC,EAAOC,KAAKC,MAAMH,EAAM,IAAM,EAEpC,MAHmB,CAAC,IAAI,KAAK,IAAI,KAAK,IAAI,IAAK,KAAM,IAAK,KAAM,IAAK,KAAM,KAE5DA,EAAM,IACOC,EAAKG,a,mCAGrC,SAA6BC,GACzB,IAAMC,EACK,CAAC,EAAG,EAAG,GADZA,EAEK,CAAC,EAAG,EAAG,GAKdC,EAAW,GACXC,EAAY,GAED,KAAXH,EAAK,IACLE,EAAWF,EAAKI,OAAO,EAAG,GAC1BD,EAAYH,EAAKI,OAAO,KAGxBF,EAAWF,EAAKI,OAAO,EAAG,GAC1BD,EAAYH,EAAKI,OAAO,IAI5B,IACIC,EAAW,GACfA,GAFmB,CAAC,IAAI,KAAK,IAAI,KAAK,IAAI,IAAK,KAAM,IAAK,KAAM,IAAK,KAAM,KAEpDC,QAAQJ,GAG/B,IAAIK,EAAQ,GACZ,OAAOJ,GACH,IAAK,GACDI,EAAQN,EACR,MACJ,IAAK,IACDM,EAAQN,EAMhB,IAAIO,EAAa,GASjB,OARAD,EAAME,KAAI,SAACC,GACPF,EAAWG,KAAK,CACZC,KAAMP,EAAWK,EACjBG,IAAK,IACLC,OAAQ,SAITN,M,YCpDTO,E,kDAeF,WAAYC,GAAO,IAAD,8BACd,cAAMA,IAGDC,MAAQ,GAGb,EAAKC,QAAU,EAAKA,QAAQC,KAAb,gBAPD,E,2CAZlB,WAAW,IAAD,OACAZ,EAAQa,KAAKJ,MAAMT,MACNb,EAAI2B,sBAAsBd,GAElCE,KAAI,SAAAa,GACX,EAAKN,MAAMO,SAAS,CAChBC,KAAM,UACNC,KAAMH,S,oBAelB,WAEI,IAAII,EAEEC,GAAQP,KAAKJ,MAAMY,OAASR,KAAKJ,MAAMa,MAAQ,IAAM,GAgC3D,OA9BIH,EADQ,GAARC,GAAqB,GAARA,GAAqB,IAARA,EAClB,CACJG,WAAY,OACZC,OAAQ,WAGC,GAARJ,GAAqB,GAARA,GAAqB,GAARA,EACvB,CACJG,WAAY,OACZC,OAAQ,WAGC,GAARJ,GAAqB,GAARA,GAAqB,GAARA,EACvB,CACJG,WAAY,OACZC,OAAQ,WAGC,GAARJ,GAAqB,GAARA,GAAqB,IAARA,EACvB,CACJG,WAAY,SACZC,OAAQ,WAIJ,CACJD,WAAY,OACZC,OAAQ,WAKhB,oBAAIC,QAASZ,KAAKF,QAASQ,MAAOA,EAAlC,SACKN,KAAKJ,MAAMT,Y,GA/DM0B,aAqEfC,eAAQ,SAAAjB,GAAK,OAAEA,IAAfiB,CAAsBnB,GCrE/BoB,E,kDAaF,WAAYnB,GAAO,IAAD,8BACd,cAAMA,IAXVoB,iBAAqB,CAAC,GAAG,GAAG,GAAG,GAAG,KAAM,KAAO,KAAO,KAAM,KAAM,KAAM,IAAM,SAAO,IAAK,KAAM,KAAO,KAAO,KAAM,KAAO,KAAK,GAAG,GAAG,GAAG,IAUvH,EATlBC,mBAAqB,CAAC,IAAI,IAAM,IAAO,IAAO,IAAM,KAAO,KAAO,KAAM,KAAM,KAAM,IAAO,IAAM,IAAM,IAAM,IAAO,IAAO,IAAK,KAAM,KAAM,KAAM,KAAM,KAAM,KAS5I,EARlBC,mBAAqB,CAAC,KAAK,KAAM,MAAO,MAAM,MAAM,MAAO,MAAO,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO,MAAO,MAAM,MAAO,MAAM,KAAM,KAAM,KAAM,MAY3J,EAAKrB,MAAQ,CACTW,OAAQ,IAGZ,EAAKV,QAAU,EAAKA,QAAQC,KAAb,gBACf,EAAKoB,YAAc,EAAKA,YAAYpB,KAAjB,gBATL,E,2CALlB,SAAQqB,GACJ,IAAMC,EAAMD,EAAEE,OAAOC,aAAa,YAClCvB,KAAKwB,SAAS,CAAChB,OAAQa,M,yBAgB3B,SAAYA,GAYR,OAVGrB,KAAKH,MAAMW,QAAUa,EACZ,CACJV,OAAQ,UACRD,WAAY,QAGR,CACJC,OAAQ,a,oBAMpB,WAAU,IAAD,OAECc,EAAQzB,KAAKgB,iBAAmB3B,KAAI,SAACT,EAAM6B,GAAP,OAAe,oBAAgBH,MAAO,EAAKa,YAAYV,GAAQG,QAAS,EAAKd,QAAS4B,WAAUjB,EAAjF,SAAyF7B,GAAhF6B,MAC5DkB,EAAQ3B,KAAKiB,mBAAmB5B,KAAI,SAACT,EAAM6B,GAAP,OAAe,cAAC,EAAD,CAA6BA,MAAOA,EAAOD,OAAQ,EAAKX,MAAMW,OAAQrB,MAAOP,GAAvD6B,MACzEmB,EAAQ5B,KAAKkB,mBAAmB7B,KAAI,SAACT,EAAM6B,GAAP,OAAe,cAAC,EAAD,CAA6BA,MAAOA,EAAOD,OAAQ,EAAKX,MAAMW,OAAQrB,MAAOP,GAAvD6B,MAE/E,OACI,uBAAOoB,UAAU,uBAAjB,SAAwC,kCACpC,6BACKJ,IAEL,6BACKE,IAEL,6BACKC,a,GAxDKf,aA+DXC,eAAQ,SAAAjB,GAAK,OAAEA,IAAfiB,CAAsBC,GC/D/Be,E,kDAgDF,WAAYlC,GAAO,IAAD,8BACd,cAAMA,IAGDC,MAAQ,CACTkC,QAAS,iBACTC,QAAS,GACTC,SAAU,GACVC,kBAAmB,GACnBC,iBAAkB,IAGtBC,UAAUC,kBAAkB,CAACC,OAAO,IAAOC,MAEvC,SAACC,GAIG,IAFA,IAAIC,EAAgBD,EAAWE,OAAOC,SAClCX,EAAU,GACLY,EAAQH,EAAcI,QAASD,EAAME,KAAMF,EAAQH,EAAcI,OAAQ,CAC9E,IAAIE,EAAQH,EAAMG,MAClBf,EAAQzC,KAAK,CACTX,KAAMmE,EAAMnE,KACZoE,GAAID,EAAME,KAGdF,EAAMG,iBAAiB,cAAe,EAAKC,YAAY,GAEvDnB,EAAQoB,QAAQ,EAAK5B,SAAS,CAAEW,iBAAkBH,EAAQ,GAAGgB,KACjE,EAAKxB,SAAS,CAAEQ,QAASA,IAGzB,IAAIC,EAAW,GACf,EAAKoB,QAAUb,EAAWa,QAlBd,oBAmBO,EAAKA,QAAQV,UAnBpB,IAmBZ,2BAA0C,CAAC,IAAlCW,EAAiC,QACtCrB,EAAS1C,KAAK,CACVgE,OAAQD,EACR1E,KAAM0E,EAAO1E,KACboE,GAAIM,EAAOL,MAvBP,8BA0BRhB,EAASmB,SACT,EAAK5B,SAAS,CACVU,kBAAmBD,EAAS,GAAGe,KAInC,EAAKpD,MAAMO,SAAS,CAACC,KAAM,kBAAmBkD,OAAQ,EAAKD,QAAQG,IAAIvB,EAAS,GAAGe,OAEvF,EAAKxB,SAAS,CACVS,SAAUA,IAGdwB,QAAQC,IAAI,iBACZ,EAAKlC,SAAS,CAACO,QAAS,kBAG5B,SAAC4B,GACGF,QAAQC,IAAI,iBAAmBC,MAIvC,EAAK7D,QAAU,EAAKA,QAAQC,KAAb,gBACf,EAAK6D,SAAW,EAAKA,SAAS7D,KAAd,gBAChB,EAAKoD,WAAa,EAAKA,WAAWpD,KAAhB,gBA/DJ,E,8CA7ClB,SAAWqB,GACMA,EAAEE,OAAf,IACIS,EACA8B,EAAW,GAGfzC,EAAEf,KAAKyD,SAAQ,SAAAC,GAGXF,EAAStE,KAAKwE,EAAIpF,SAAS,QAEZ,MAAfkF,EAAS,IAA6B,MAAfA,EAAS,KACpC9B,EAAU8B,EAASG,KAAK,KAGxBhE,KAAKH,MAAMoC,SAAS,GAAGsB,OAAOU,KAAK7C,EAAEf,MAGrCoD,QAAQC,IAAI3B,M,sBAIhB,SAASX,GACLpB,KAAKwB,SAAS,CAAEU,kBAAoBd,EAAEE,OAAOyB,U,qBAIjD,WAEI,IAAMO,EAAStD,KAAKqD,QAAQG,IAAIxD,KAAKH,MAAMqC,mBAG3CoB,EAAOW,KAAK,CAAC,IAAM,GAAI,MACvBX,EAAOW,KAAK,CAAC,IAAM,GAAI,KAAMC,OAAOC,YAAYC,MAAQ,KAExDd,EAAOW,KAAK,CAAC,IAAM,GAAI,MACvBX,EAAOW,KAAK,CAAC,IAAM,GAAI,KAAMC,OAAOC,YAAYC,MAAQ,KAExDd,EAAOW,KAAK,CAAC,IAAM,GAAI,MACvBX,EAAOW,KAAK,CAAC,IAAM,GAAI,KAAMC,OAAOC,YAAYC,MAAQ,KAGxDpE,KAAKJ,MAAMO,SAAS,CAACC,KAAM,kBAAmBkD,OAAQA,M,oBAqE1D,WAEI,IAAIe,EAAI,EACJC,EAAWtE,KAAKH,MAAMmC,QAAQ3C,KAAI,SAAA0D,GAAK,OACvC,yBAAkBA,MAAOA,EAAMC,GAA/B,UAAoCD,EAAMnE,KAA1C,KAAkDmE,EAAMC,GAAxD,MAAaqB,QAEbE,EAAYvE,KAAKH,MAAMoC,SAAS5C,KAAI,SAAA0D,GAAK,OACzC,yBAAkBA,MAAOA,EAAMC,GAA/B,UAAoCD,EAAMnE,KAA1C,KAAkDmE,EAAMC,GAAxD,MAAaqB,QAGjB,OACA,sBAAKxC,UAAU,MAAf,UACI,qBAAKA,UAAU,WAAf,SACI,gCAAO,kCACH,+BAAI,yCAAgB,6BAAI,iCAAUyC,SAClC,+BAAI,0CAAiB,6BAAI,wBAAQE,SAAUxE,KAAK4D,SAAUa,aAAa,KAA9C,SAAqDF,gBAGtF,qBAAK1C,UAAU,WAAf,SACI,cAAC,EAAD,a,GArIShB,aA4IVC,eAAQ,SAAAjB,GAAK,OAAEA,IAAfiB,CAAsBgB,G,OC7I/B4C,EAAW,CACbtF,WAAY,GAGZkE,OAAQ,KACRqB,IAAK,EACLC,QAAS,EACTC,YAAa,CACT,CACIC,QAAS,EACTlG,KAAM,SAEV,CACIkG,QAAS,EACTlG,KAAM,QAEV,CACIkG,QAAS,EACTlG,KAAM,SAEV,CACIkG,QAAS,EACTlG,KAAM,SAEV,CACIkG,QAAS,EACTlG,KAAM,SAEV,CACIkG,QAAS,EACTlG,KAAM,SAEV,CACIkG,QAAS,EACTlG,KAAM,SAEV,CACIkG,QAAS,EACTlG,KAAM,SAEV,CACIkG,QAAS,EACTlG,KAAM,WAMlB,SAASmG,EAAUC,GACfA,EAAIC,MAAK,SAACC,EAAGC,GACT,OAAID,EAAEP,IAAMQ,EAAER,KAAa,EACvBO,EAAEP,IAAMQ,EAAER,IAAY,EACtBO,EAAEE,KAAOD,EAAEC,MAAc,EACzBF,EAAEE,KAAOD,EAAEC,KAAa,EACxBF,EAAE1F,KAAO2F,EAAE3F,MAAc,EACzB0F,EAAE1F,KAAO2F,EAAE3F,KAAa,EACrB,KAKR,SAAS6F,IAAsC,IAAzBxF,EAAwB,uDAAlB6E,EAAUY,EAAQ,uCACjD,OAAOA,EAAOlF,MAEd,IAAK,YACD,IAAImF,EAAW1F,EAAMT,WAAWoG,QAGhC,OAFAD,EAAShG,KAAK+F,EAAOjF,MACrB0E,EAAUQ,GACH,CACHjC,OAAQzD,EAAMyD,OACdlE,WAAYmG,EACZZ,IAAK9E,EAAM8E,IACXC,QAAS/E,EAAM+E,QACfC,YAAahF,EAAMgF,aAE3B,IAAK,YACD,IAAIY,EAAW5F,EAAMT,WAAWsG,QAC5B,SAAAxF,GAAS,OACLA,EAAU0E,SAAWU,EAAOjF,KAAKuE,SACjC1E,EAAUyE,KAAOW,EAAOjF,KAAKsE,KAC7BzE,EAAUkF,MAAQE,EAAOjF,KAAK+E,MAC9BlF,EAAUV,MAAQ8F,EAAOjF,KAAKb,QAGtC,MAAO,CACH8D,OAAQzD,EAAMyD,OACdlE,WAAYqG,EACZd,IAAK9E,EAAM8E,IACXC,QAAS/E,EAAM+E,QACfC,YAAahF,EAAMgF,aAE3B,IAAK,UACD,MAAO,CACHvB,OAAQzD,EAAMyD,OACdlE,WAAYsF,EAAStF,WACrBuF,IAAK9E,EAAM8E,IACXC,QAAS/E,EAAM+E,QACfC,YAAahF,EAAMgF,aAI3B,IAAK,kBACD,MAAO,CACHvB,OAAQgC,EAAOhC,OACflE,WAAYS,EAAMT,WAClBuF,IAAK9E,EAAM8E,IACXC,QAAS/E,EAAM+E,QACfC,YAAahF,EAAMgF,aAE3B,IAAK,UAEG,IAAIc,EAAK,EAC8BA,OAAXC,IAAxBN,EAAOjF,KAAKuE,QAA4B,EAClCU,EAAOjF,KAAKuE,QACtB/E,EAAMyD,OAAOW,KAAK,CAAC,IAAO0B,EAAIL,EAAOjF,KAAKb,KAAM8F,EAAOjF,KAAKZ,MAC5DI,EAAMyD,OAAOW,KAAK,CAAC,IAAO0B,EAAIL,EAAOjF,KAAKb,KAAM8F,EAAOjF,KAAKZ,KAAMyE,OAAOC,YAAYC,MAAQkB,EAAOjF,KAAKX,QACzG,MAER,IAAK,eACDG,EAAMyD,OAAOW,KAAK,CAAC,IAAM,IAAM,IAC/B,MACJ,IAAK,iBAEG,IAAM0B,EAAK9F,EAAM+E,QACXrG,EAAM+G,EAAOO,cACnBhG,EAAMyD,OAAOW,KAAK,CAAC,IAAO0B,EAAIpH,IAC9B,IAAIuH,EAAiBjG,EAAMgF,YAAYW,QAEvC,OADAM,EAAeH,GAAIb,QAAUvG,EACtB,CACH+E,OAAQzD,EAAMyD,OACdlE,WAAYS,EAAMT,WAClBuF,IAAK9E,EAAM8E,IACXC,QAAS/E,EAAM+E,QACfC,YAAaiB,GAKzB,IAAK,WACD,IAAInB,EAAMW,EAAOX,IAIjB,OAHIA,EAAM,MAAKA,EAAM,KACjBA,EAAM,IAAGA,EAAM,GAEZ,CACHrB,OAAQzD,EAAMyD,OACdlE,WAAYS,EAAMT,WAClBuF,IAAKA,EACLC,QAAS/E,EAAM+E,QACfC,YAAahF,EAAMgF,aAI3B,IAAK,eACD,IAAID,EAAUU,EAAOV,QAGrB,OAFIA,EAAU,KAAIA,EAAU,IACxBA,EAAU,IAAGA,EAAU,GACpB,CACHtB,OAAQzD,EAAMyD,OACdlE,WAAYS,EAAMT,WAClBuF,IAAK9E,EAAM8E,IACXC,QAASA,EACTC,YAAahF,EAAMgF,aAK3B,OAAOhF,EAaIkG,YAAYV,GAAZU,IClLTC,E,kDAkGF,WAAYpG,GAAO,IAAD,8BACd,cAAMA,IAlGVqG,aAAe,CACXC,MAAO,QAgGO,EA9FlBC,WAAa,CACTD,MAAO,OACPxF,WAAY,QA4FE,EA1FlB0F,OAAS,CACLC,WAAY,iBACZ3F,WAAY,QA4FZ,EAAKb,MAAQ,CACTyG,UAAU,GAGd,EAAKxG,QAAU,EAAKA,QAAQC,KAAb,gBACf,EAAKwG,aAAe,EAAKA,aAAaxG,KAAlB,gBATN,E,gDApFlB,SAAaqB,GAELpB,KAAKJ,MAAM4G,aAEM,EAAZpF,EAAEqF,WACHhD,QAAQC,IAAI,WACZ1D,KAAKF,QAAQsB,O,qBAMzB,SAAQA,GAAI,IAAD,OACHgE,EAA2C,EAApChE,EAAEE,OAAOC,aAAa,YAC7B/B,EAA2C,EAApC4B,EAAEE,OAAOC,aAAa,YAGjC,GAFAvB,KAAKwB,UAAS,SAAA3B,GAAK,MAAK,CAACyG,UAAWzG,EAAMyG,aAEtCtG,KAAKH,MAAMyG,SACXtG,KAAKJ,MAAMO,SAAS,CAChBC,KAAM,YACNC,KAAM,CACFuE,QAAS5E,KAAKJ,MAAMgF,QACpBD,IAAK3E,KAAKJ,MAAM+E,IAChBS,KAAMA,EACN5F,KAAMA,SAIb,CACD,IAAI8F,EDgIL,CACHlF,KAAM,YACNC,KClI0B,CAClBuE,QAAS5E,KAAKJ,MAAMgF,QACpBD,IAAK3E,KAAKJ,MAAM+E,IAChBS,KAAMA,EACN5F,KAAMA,EACNkH,KAAM,IACNjH,IAAK,MAKT,GAHAO,KAAKJ,MAAMO,SAASmF,GAGhBtF,KAAKJ,MAAM4G,SAAU,CAErB,IAAMG,EAAiB3G,KAAKJ,MAAMR,WAAWsG,QAAO,SAAAxF,GAAS,OACzDA,EAAU0E,SAAWU,EAAOjF,KAAKuE,SACjC1E,EAAUyE,KAAOW,EAAOjF,KAAKsE,KAC7BzE,EAAUkF,MAAQE,EAAOjF,KAAK+E,QAI9BuB,EAAevD,OAAS,GACxBuD,EAAetH,KAAI,SAACa,GAChB,EAAKN,MAAMO,SAAS,CAChBC,KAAM,YACNC,KAAM,CACFuE,QAAS,EAAKhF,MAAMgF,QACpBD,IAAK,EAAK/E,MAAM+E,IAChBS,KAAMA,EACN5F,KAAMU,EAAUV,WAOhCQ,KAAKJ,MAAMgH,YAEX5G,KAAKJ,MAAMO,SAAS,CAChBC,KAAM,iBAIVJ,KAAKJ,MAAMO,SAAS,CAChBC,KAAM,UACNC,KAAM,CACFuE,QAAS5E,KAAKJ,MAAMgF,QACpBpF,KAAMA,EACNE,OAAQ,IACRD,IAAK,W,oBAoBzB,WAAU,IAAD,OACDoH,EAAU7G,KAAKJ,MAAMkH,IACrB1B,EAAOpF,KAAKJ,MAAMmH,IAGlBC,EAAWhH,KAAKJ,MAAMR,WAAW6H,MAAK,SAAA/G,GAAS,OAC/CA,EAAU0E,SAAW,EAAKhF,MAAMgF,SAChC1E,EAAUyE,KAAO,EAAK/E,MAAM+E,KAC5BzE,EAAUV,MAAQqH,GAClB3G,EAAUkF,MAAQA,KAKtB,OAH4BpF,KAAKH,MAAMyG,cAAtBV,IAAboB,EAIA,oBAAI1G,MAAON,KAAKH,MAAMyG,SAAWtG,KAAKmG,WAAanG,KAAKiG,aACxDrF,QAASZ,KAAKF,QAASoH,aAAclH,KAAKuG,aAAcY,WAAUN,EAASO,WAAUhC,EADrF,SAEI,qBAAK9E,MAAON,KAAKoG,e,GAhILvF,aAsIbC,eAAQ,SAAAjB,GAAK,OAAEA,IAAfiB,CAAsBkF,GCrI/BqB,E,kDAmBF,WAAYzH,GAAO,IAAD,8BACd,cAAMA,IAlBV0H,IAAM,CACFC,OAAQ,QACRC,SAAU,OACV7G,OAAQ,UACR8G,WAAY,QAaE,EAXlBC,GAAK,CACDxB,MAAO,SAcP,EAAKrG,MAAQ,CACTqG,MAAQ,GACRqB,OAAS,GACTtI,SAAU,GACVuH,UAAU,EACVI,WAAW,GAGf,EAAKe,cAAgB,EAAKA,cAAc5H,KAAnB,gBACrB,EAAK6H,UAAY,EAAKA,UAAU7H,KAAf,gBACjB,EAAK8H,aAAe,EAAKA,aAAa9H,KAAlB,gBACpB,EAAK+H,cAAgB,EAAKA,cAAc/H,KAAnB,gBACrB,EAAKgI,UAAY,EAAKA,UAAUhI,KAAf,gBAEjB,EAAKiI,IAAMC,IAAMC,YAlBH,E,iDAPlB,SAAc9G,GAAKpB,KAAKwB,SAAS,CAACvC,SAAUmC,EAAEE,OAAOyB,U,uBACrD,SAAU3B,GACNpB,KAAKJ,MAAMO,SAAS,CAACC,KAAM,WAAYuE,IAAKvD,EAAEE,OAAOyB,U,0BAEzD,SAAa3B,GAAIpB,KAAKwB,SAAS,CAACgF,SAAUpF,EAAEE,OAAO6G,Y,2BACnD,SAAc/G,GAAIpB,KAAKwB,SAAS,CAACoF,UAAWxF,EAAEE,OAAO6G,Y,+BAwBrD,WACInI,KAAKgI,IAAII,QAAQC,eAAe,CAC5BC,MAAO,a,uBAKf,SAAU9I,GAEN,IAQMF,GAAUE,EAAOQ,KAAKH,MAAMZ,SAAW,KAAO,GAEpD,OAAc,GAAVK,EAJe,CAAEoB,WAAY,aANnB,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAW3BpB,GAPS,CAAEoB,WAAY,SAFb,CAAEA,WAAY,gB,oBAatC,WAGI,IAHM,IAAD,OAEC6H,EAAQ,GACLC,EAAI,IAAKA,GAAK,EAAGA,IACtBD,EAAMhJ,KAAKiJ,GAGf,IADA,IAAMC,EAAQ,GACLD,EAAI,EAAGA,GAAK,GAAIA,IACrBC,EAAMlJ,KAAKiJ,GAIf,IAAME,EAAOH,EAAMlJ,KAAI,SAACsJ,EAAMC,GAC1B,IAAMpJ,EAAO,IAAMoJ,EACnB,OACI,qBAAetI,MAAO,EAAKyH,UAAUvI,GAArC,UAEI,oBAAIc,MAAO,EAAKoH,GAAIM,IAAKxI,GAAQ,EAAKK,MAAMZ,SAAW,EAAK+I,IAAM,GAAlE,SAAuE1J,EAAIuK,qBAAqBrJ,KAG/FiJ,EAAMpJ,KAAI,SAACyJ,EAAMC,GAAP,OACP,cAAC,EAAD,CAA0BjC,IAAKtH,EAAMuH,IAAKgC,EAAUvC,SAAU,EAAK3G,MAAM2G,SAAUI,UAAW,EAAK/G,MAAM+G,WAArFkC,QANnBH,MAYjB,OACI,gCAEI,qBAAKrI,MAAON,KAAKsH,IAAjB,SACA,uBAAOzF,UAAU,gCAAjB,SAAiD,gCAC5C6G,QAKL,8BAEI,0CACA,uBAAOtI,KAAK,SAAS2C,MAAO/C,KAAKH,MAAMZ,SAAU+J,IAAI,KAAKC,IAAI,MAAMzE,SAAWxE,KAAK2H,gBAHxF,IAIMrJ,EAAIuK,qBAAqB7I,KAAKH,MAAMZ,UAJ1C,IAOI,0CACA,uBAAOmB,KAAK,SAAS2C,MAAO/C,KAAKJ,MAAM+E,IAAKqE,IAAI,IAAIC,IAAI,MAAMzE,SAAUxE,KAAK4H,YAG7E,6CACA,uBAAOxH,KAAK,WAAW6C,GAAG,SAASuB,SAAUxE,KAAK6H,aAAcM,QAASnI,KAAKH,MAAM2G,WAGpF,8CACA,uBAAOpG,KAAK,WAAW6C,GAAG,SAASuB,SAAUxE,KAAK8H,cAAeK,QAASnI,KAAKH,MAAM+G,sB,GAtHjF/F,aA+HTC,eAAQ,SAAAjB,GAAK,OAAEA,IAAfiB,CAAsBuG,GChI/B6B,E,kDASF,WAAYtJ,GAAO,IAAD,8BACd,cAAMA,IATV0H,IAAM,CACFC,OAAQ,QACRC,SAAU,QAUV,EAAK3H,MAAQ,GAGb,EAAKC,QAAU,EAAKA,QAAQC,KAAb,gBAPD,E,2CAHlB,SAAQqB,M,oBAaR,WAAU,IAAD,OAOC+H,EALcnJ,KAAKJ,MAAMR,WAAWsG,QAAO,SAAAxF,GAC7C,OAAOA,EAAU0E,SAAW,EAAKhF,MAAMgF,WAIdvF,KAAI,SAACa,EAAWO,GAAZ,OAC7B,+BACI,6BAAKP,EAAU0E,UACf,6BAAK1E,EAAUyE,MACf,6BAAKzE,EAAUkF,OACf,6BAAK9G,EAAIuK,qBAAqB3I,EAAUV,QACxC,6BAAKU,EAAUwG,OACf,6BAAKxG,EAAUT,QANVgB,MAUb,OACI,qBAAKH,MAAON,KAAKsH,IAAjB,SACI,wBAAOzF,UAAU,iBAAjB,UACI,gCACI,+BACI,qCACA,qCACA,sCACA,uCACA,sCACA,gDAGR,gCACKsH,a,GAnDFtI,aA2DRC,eAAQ,SAAAjB,GAAK,OAAEA,IAAfiB,CAAsBoI,GC1D/BE,E,kDAEF,WAAYxJ,GAAO,IAAD,8BACd,cAAMA,IAGDC,MAAQ,GAJC,E,0CASlB,WACI,OAAO,4B,GAZMgB,aAiBNC,eAAQ,SAAAjB,GAAK,OAAEA,IAAfiB,CAAsBsI,GChB/BC,E,kDAyFF,WAAYzJ,GAAO,IAAD,8BACd,cAAMA,IAzFV8H,GAAK,CACDxB,MAAO,SAuFO,EArFlBoD,GAAK,CACDpD,MAAO,QAoFO,EAlFlBqD,MAAQ,CACJrD,MAAO,OACPxF,WAAY,UAgFE,EA9ElB8I,QAAU,GAkFN,EAAK3J,MAAQ,CACT4J,IAAM,GACNC,QAAS,EACTC,WAAW,EACXC,QAAQ,EACRC,QAAQ,GAGZ,EAAKC,WAAa,EAAKA,WAAW/J,KAAhB,gBAClB,EAAKgK,QAAU,EAAKA,QAAQhK,KAAb,gBACf,EAAKiK,UAAY,EAAKA,UAAUjK,KAAf,gBACjB,EAAKkK,WAAa,EAAKA,WAAWlK,KAAhB,gBAClB,EAAKmK,WAAa,EAAKA,WAAWnK,KAAhB,gBAClB,EAAKoK,WAAa,EAAKA,WAAWpK,KAAhB,gBAjBJ,E,8CA5ElB,WACQC,KAAKH,MAAM8J,WACX3J,KAAKwB,SAAS,CAACmI,WAAW,IAC1BS,aAAapK,KAAKqK,SAGlBrK,KAAKwB,SAAS,CAACmI,WAAW,IAC1B3J,KAAKsK,OACLtK,KAAKqK,MAAQE,WAAWvK,KAAK+J,QAAU,KAAa/J,KAAKH,MAAM4J,IAAMzJ,KAAKwJ,Y,kBAIlF,WAAQ,IAAD,OAGGnJ,EAAOL,KAAKJ,MAAMR,WAAWsG,QAAO,SAAAxF,GACtC,OAAI,EAAKL,MAAMgK,OACJ3J,EAAU0E,SAAW,EAAKhF,MAAMgF,SAAW1E,EAAUyE,KAAO,EAAK/E,MAAM+E,KAAOzE,EAAUkF,MAAQ,EAAKvF,MAAM6J,QAE1GxJ,EAAUyE,KAAO,EAAK/E,MAAM+E,KAAOzE,EAAUkF,MAAQ,EAAKvF,MAAM6J,WAI5ErJ,EAAK+C,OAAS,GAEd/C,EAAKhB,KAAI,SAAAmL,GACL,EAAK5K,MAAMO,SAAS,CAChBC,KAAM,UACNC,KAAM,CACFuE,QAAS4F,EAAE5F,QACXpF,KAAMgL,EAAEhL,KACRE,OAAQ,KAAa,EAAKG,MAAM4J,KAAOe,EAAE9D,KAAF,MAAsB,EAC7DjH,IAAK+K,EAAE/K,Y,qBAQ3B,WAEI,IAAIgL,EAAWzK,KAAKH,MAAM6J,QAAU,EAChCe,GAAYzK,KAAKwJ,UACjBiB,GAAYzK,KAAKwJ,QACZxJ,KAAKH,MAAM+J,QAEZ5J,KAAKJ,MAAMO,SAAS,CAAEC,KAAK,WAAYuE,IAAoB,EAAf3E,KAAKJ,MAAM+E,IAAO,KAGtE3E,KAAKwB,SAAS,CAAEkI,QAASe,IAEzBzK,KAAKsK,OAGL,IAAII,EAAY,KAAa1K,KAAKH,MAAM4J,IAAMzJ,KAAKwJ,QAC/CiB,GAAYzK,KAAKwJ,QAAU,GAAMxJ,KAAKH,MAAM+J,SAAQc,GAAa,IAErE1K,KAAKqK,MAAQE,WAAWvK,KAAK+J,QAASW,K,uBAG1C,SAAUtJ,GACNpB,KAAKwB,SAAS,CAACiI,IAAKrI,EAAEE,OAAOyB,U,wBAGjC,SAAW3B,GACPpB,KAAKwB,SAAS,CAACoI,OAAQxI,EAAEE,OAAO6G,Y,wBAGpC,SAAW/G,GACPpB,KAAKwB,SAAS,CAACqI,OAAQzI,EAAEE,OAAO6G,Y,wBAEpC,SAAW/G,GACPpB,KAAKwB,SAAS,CAACkI,QAA4C,EAAnCtI,EAAEE,OAAOC,aAAa,iB,oBAuBlD,WAEI,IADA,IAAIkH,EAAQ,GACHD,EAAI,EAAGA,EAAIxI,KAAKwJ,QAAShB,IAC9BC,EAAMlJ,KAAK,oBAAYoL,YAAWnC,EAAG5H,QAASZ,KAAKmK,WAAY7J,MAAON,KAAKH,MAAM6J,SAAWlB,EAAIxI,KAAKuJ,MAAQvJ,KAAKsJ,IAA9Fd,IAGxB,OACI,gCACI,8BAEI,uBAAOpI,KAAK,SAAS2C,MAAO/C,KAAKH,MAAM4J,IAAKT,IAAI,IAAIC,IAAI,MAAMzE,SAAUxE,KAAKgK,YAC7E,wBAAQnI,UAAU,kBAAkBjB,QAASZ,KAAK8J,WAAlD,SACK9J,KAAKH,MAAM8J,UAAY,UAAY,SAIxC,2CACA,uBAAOvJ,KAAK,WAAW6C,GAAG,OAAOuB,SAAUxE,KAAKiK,WAAY9B,QAASnI,KAAKH,MAAM+J,SAGhF,2CACA,uBAAOxJ,KAAK,WAAW6C,GAAG,OAAOuB,SAAUxE,KAAKkK,WAAY/B,QAASnI,KAAKH,MAAMgK,YAIpF,uBAAOhI,UAAU,gCAAjB,SAAiD,gCAAO,+BACpD,oBAAIvB,MAAON,KAAK0H,GAAhB,iBACCe,gB,GAxIG5H,aA+ITC,eAAQ,SAAAjB,GAAK,OAAEA,IAAfiB,CAAsBuI,GClJ/BuB,E,kDAUF,WAAYhL,GAAO,IAAD,8BACd,cAAMA,IACDiL,YAAc,CAAC,QAAS,OAAQ,QAAQ,QAAQ,QAAQ,QAAQ,QAAQ,QAAQ,QAAQ,QAAQ,QAAQ,SAG7G,EAAKhL,MAAQ,GAGb,EAAKiL,eAAiB,EAAKA,eAAe/K,KAApB,gBARR,E,kDAPlB,SAAeqB,GACXpB,KAAKJ,MAAMO,SAAS,CAChBC,KAAM,eACNwE,QAAwB,EAAfxD,EAAEE,OAAOyB,U,oBAe1B,WAEI,IAAIsB,EAAI,EACJ0G,EAAQ/K,KAAKJ,MAAMiF,YAAYxF,KAAI,SAAA0D,GAAK,OACxC,yBAAgBA,MAAOsB,EAAvB,gBAA8BA,IAA9B,IAAoCtB,EAAMnE,OAA7ByF,MAGjB,OACI,wBAAQG,SAAUxE,KAAK8K,eAAgBrG,aAAa,KAApD,SAA2DsG,Q,GA7BzClK,aAkCfC,eAAQ,SAAAjB,GAAK,OAAEA,IAAfiB,CAAsB8J,GClC/BI,E,kDAUF,WAAYpL,GAAO,IAAD,8BACd,cAAMA,IACDqL,YAAc,CACf,UACH,UACA,UACA,cACA,YACA,YACA,cACA,QACA,UACA,eACA,YACA,aACA,UACA,YACA,gBACA,YACA,UACA,UACA,UACA,aACA,aACA,YACA,YACA,WACA,mBACA,eACA,cACA,eACA,eACA,mBACA,oBACA,eACA,gBACA,gBACA,cACA,gBACA,cACA,cACA,eACA,eACA,SACA,QACA,QACA,aACA,kBACA,oBACA,OACA,UACA,UACA,eACA,kBACA,kBACA,YACA,aACA,YACA,eACA,UACA,WACA,OACA,eACA,eACA,UACA,gBACA,gBACA,cACA,WACA,YACA,eACA,OACA,eACA,UACA,WACA,UACA,QACA,WACA,YACA,cACA,aACA,UACA,UACA,cACA,WACA,iBACA,eACA,UACA,WACA,eACA,cACA,WACA,WACA,YACA,cACA,cACA,YACA,WACA,YACA,WACA,aACA,UACA,cACA,aACA,SACA,aACA,aACA,QACA,QACA,WACA,OACA,UACA,UACA,SACA,SACA,cACA,QACA,cACA,YACA,QACA,cACA,aACA,cACA,eACA,eACA,WACA,OACA,YACA,aACA,WACA,YAID,EAAKpL,MAAQ,GAGb,EAAKiL,eAAiB,EAAKA,eAAe/K,KAApB,gBAzIR,E,kDAPlB,SAAeqB,GACXpB,KAAKJ,MAAMO,SAAS,CAChBC,KAAM,iBACNyF,cAA8B,EAAfzE,EAAEE,OAAOyB,U,oBAgJhC,WAEI,IAAIsB,EAAI,EACJ0G,EAAQ/K,KAAKiL,YAAY5L,KAAI,SAAA0D,GAAK,OAClC,yBAAgBA,MAAOsB,EAAvB,UAA2BA,IAA3B,KAAkCtB,IAArBsB,MAGjB,OACI,wBAAQG,SAAUxE,KAAK8K,eAAgB/H,MAAO/C,KAAKJ,MAAMiF,YAAY7E,KAAKJ,MAAMgF,SAASE,QAAzF,SAAoGiG,Q,GA9JnFlK,aAmKdC,eAAQ,SAAAjB,GAAK,OAAEA,IAAfiB,CAAsBkK,GC7J/BE,E,kDAOF,WAAYtL,GAAO,IAAD,8BACd,cAAMA,IAGDC,MAAQ,GAGb,EAAKC,QAAU,EAAKA,QAAQC,KAAb,gBAPD,E,2CANlB,SAAQqB,GACJpB,KAAKJ,MAAMO,SAAS,CAChBC,KAAM,c,oBAgBd,WACI,OAAO,gCACH,sBAAKyB,UAAU,WAAf,UACI,sBAAKA,UAAU,WAAf,UACI,gCACI,cAAC,EAAD,IACA,cAAC,EAAD,OAEJ,cAAC,EAAD,OAEJ,sBAAKA,UAAU,WAAf,UACI,cAAC,EAAD,IACA,cAAC,EAAD,OAEJ,cAAC,EAAD,OAGJ,qBAAKA,UAAU,MAAf,SACI,wBAAQA,UAAU,iBAAiBjB,QAASZ,KAAKF,QAAjD,oC,GArCQe,aA2CTC,eAAQ,SAAAjB,GAAK,OAAEA,IAAfiB,CAAsBoK,G,wBCvC/BC,EAAgB,CAClB9J,IAAK,QACL+J,Q,OAASA,EACTC,UAAW,CAAC,UACZC,UAAW,CAAC,aAAa,gBAIvBC,EAAmBC,YAAeL,EAAe9F,GAGnDoG,EAAQ1F,YAAYwF,GACpBG,EAASC,YAAaF,GA8CXG,E,kDA3CX,WAAYhM,GAAO,uCACTA,G,0CAGV,WACA,OACI,sBAAKiC,UAAU,kBAAf,UACI,cAAC,IAAD,CAAU4J,MAAOA,EAAjB,SACI,eAAC,IAAD,CAAaI,QAAS,2CAAmBC,UAAWJ,EAApD,UACI,cAAC,EAAD,IACA,uBACA,cAAC,EAAD,SAIR,uBAEA,sCACA,6BAAI,mBAAGK,KAAK,uCAAR,sBAEJ,8CACA,gEACA,0GACA,gEACA,kDACA,uBAEA,8PAEA,4MAEA,0GAEA,8CACA,6BAAI,mBAAGA,KAAK,qDAAR,iCACJ,6BAAI,mBAAGA,KAAK,0EAAR,0BACJ,4CACA,6BAAI,mBAAGA,KAAK,+DAAR,2E,GAtCElL,aCfHmL,G,MAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqB3J,MAAK,YAAkD,IAA/C4J,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,QCAdO,IAASC,OAEL,cAAC,EAAD,IACAC,SAASC,eAAe,SAM5BX,M","file":"static/js/main.f3049744.chunk.js","sourcesContent":["class Lib {\n    // ノートナンバー（64）をノート（C5）に変換する\n    static noteNumberToNoteName(num) {\n        const notes_name = ['C','C#','D','D#','E','F', 'F#', 'G', 'G#', 'A', 'A#', 'B']\n        const base = Math.floor(num / 12) - 1\n        const offset = num % 12\n        return notes_name[offset] + base.toString()\n    }\n\n    static chordNameToNoteEvents(name) {\n        const chordPattern = {\n            major: [0, 4, 7],\n            minor: [0, 3, 7],\n            major7: [0, 4, 7, 11]\n        }\n\n        // 解析する（splitなどを利用する）\n        let baseName = ''\n        let chordName = ''\n\n        if (name[1] == '#') {\n            baseName = name.substr(0, 2)\n            chordName = name.substr(2)\n        }\n        else {\n            baseName = name.substr(0, 1)\n            chordName = name.substr(1)\n        }\n\n        // ノート取得\n        const notes_name = ['C','C#','D','D#','E','F', 'F#', 'G', 'G#', 'A', 'A#', 'B']\n        let baseNote = 60\n        baseNote += notes_name.indexOf(baseName)\n\n        // コード取得\n        let chord = []\n        switch(chordName) {\n            case '':\n                chord = chordPattern.major\n                break\n            case 'm':\n                chord = chordPattern.minor\n                break\n            default:\n                break\n        }\n\n        let noteEvents = []\n        chord.map((offset)=>{\n            noteEvents.push({\n                note: baseNote + offset,\n                vel: 100,\n                gateMs: 500\n            })\n        })\n\n        return noteEvents\n    }\n}\n\n\nexport default Lib","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport Lib from './Lib'\n\nclass ChordPlayerCell extends Component {\n\n    // テストで音を鳴らす\n    doClick() {\n        const chord = this.props.chord\n        const noteEvents = Lib.chordNameToNoteEvents(chord)\n        \n        noteEvents.map(noteEvent=>{\n            this.props.dispatch({\n                type: 'NOTE_ON',\n                data: noteEvent\n            })\n        })\n    }\n\n    constructor(props){\n        super(props)\n\n        // ステートの設定\n        this.state = {\n        }\n\n        this.doClick = this.doClick.bind(this)\n    }\n\n    render() {\n        // 調による色分け\n        let style\n\n        const diff = (this.props.nowKey - this.props.index + 24) % 12\n        if (diff == 1 || diff == 0 || diff == 11) {\n            style = {\n                background: 'pink',\n                cursor: 'pointer'\n            }\n        }\n        else if (diff == 2 || diff == 3 || diff == 4){\n            style = {\n                background: 'cyan',\n                cursor: 'pointer'\n            }\n        }\n        else if (diff == 5 || diff == 6 || diff == 7){\n            style = {\n                background: 'gray',\n                cursor: 'pointer'\n            }\n        }\n        else if (diff == 8 || diff == 9 || diff == 10){\n            style = {\n                background: 'yellow',\n                cursor: 'pointer'\n            }\n        }\n        else {\n            style = {\n                background: 'gray',\n                cursor: 'pointer'\n            }\n        }\n\n        return (\n        <td onClick={this.doClick} style={style}>           \n            {this.props.chord}\n        </td>\n        )\n    }\n}\n\nexport default connect(state=>state)(ChordPlayerCell)\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport ChordPlayerCell from './ChordPlayerCell'\n\nclass ChordPlayer extends Component {\n\n    // 五度圏\n    circleOfFifthKey   = ['','','','','7b', '6b',  '5b',  '4b', '3b', 'bb', 'b',  '♮',   '#', '##', '3#',  '4#',  '5#', '6#',  '7#','','','','']\n    circleOfFifthMajor = ['G','D',  'A',   'E',   'B',  'F#',  'C#',  'G#', 'D#', 'A#', 'F',   'C',  'G',  'D',  'A',   'E',   'B', 'F#', 'C#', 'G#', 'D#', 'A#', 'F']\n    circleOfFifthMinor = ['Em','Bm', 'F#m', 'C#m','G#m','D#m', 'A#m', 'Fm', 'Cm', 'Gm', 'Dm', 'Am', 'Em', 'Bm', 'F#m', 'C#m', 'G#m','D#m', 'A#m','Fm', 'Cm', 'Gm', 'Dm']\n\n    // 調を変える\n    doClick(e) {\n        const key = e.target.getAttribute('data-key')\n        this.setState({nowKey: key})\n    }\n\n    constructor(props){\n        super(props)\n\n        // ステートの設定\n        this.state = {\n            nowKey: 11\n        }\n\n        this.doClick = this.doClick.bind(this)\n        this.createStyle = this.createStyle.bind(this)\n    }\n\n    // スタイルによって色を変える\n    createStyle(key) {\n        let style = null\n        if(this.state.nowKey == key){\n            style = {\n                cursor: 'pointer',\n                background: 'pink'\n            }\n        }else {\n            style = {\n                cursor: 'pointer'\n            }\n        }\n        return style\n    }\n\n    render() {\n        // td作成\n        const item0 = this.circleOfFifthKey  .map((name, index)=><th key={index} style={this.createStyle(index)} onClick={this.doClick} data-key={index}>{name}</th>)\n        const item1 = this.circleOfFifthMajor.map((name, index)=><ChordPlayerCell key={index} index={index} nowKey={this.state.nowKey} chord={name} />)\n        const item2 = this.circleOfFifthMinor.map((name, index)=><ChordPlayerCell key={index} index={index} nowKey={this.state.nowKey} chord={name} />)\n\n        return (\n            <table className='table table-bordered'><tbody>\n                <tr>\n                    {item0}\n                </tr>\n                <tr>\n                    {item1}\n                </tr>\n                <tr>\n                    {item2}\n                </tr>\n            </tbody></table>\n        )\n    }\n}\n\nexport default connect(state=>state)(ChordPlayer)\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport ChordPlayer from './ChordPlayer';\n\nclass Instrument extends Component {\n\n    // Inputを受け取ったときのイベント\n    inputEvent(e) {\n        let target = e.target;\n        let message = '';\n        let numArray = [];\n        // 2桁の16進数にして表示する\n        // リアルタイムメッセージ（f8 or feは無視、なんとかして消したい）\n        e.data.forEach(val=> {\n            // if (val == 0xf8 || val == 0xfe) return\n            // numArray.push(('00' + val.toString(16)).substr(-2)); // 謎\n            numArray.push(val.toString(16))\n        });\n        if (numArray[0] == 'f8' || numArray[0] == 'fe') return \n        message = numArray.join(' ');\n        \n        // 選択中のDeviceに結果を送信する\n        this.state.outPorts[0].device.send(e.data);\n\n        // 2桁の16進数を表示\n        console.log(message);\n    }\n\n    // アウトプットセレクトタグが変化した場合\n    doChange(e) {\n        this.setState({ selectedOutPortID : e.target.value })\n    }\n\n    // テストで音を鳴らす\n    doClick() {\n        // 出力先の MIDI ポートを取得\n        const output = this.outputs.get(this.state.selectedOutPortID);\n\n        // MIDI メッセージを送信\n        output.send([0x90, 60, 100]);                                       // ノートオン\n        output.send([0x80, 60, 100], window.performance.now() + 500);      // 1秒後にノートオフ\n        // MIDI メッセージを送信\n        output.send([0x90, 64, 100]);                                       // ノートオン\n        output.send([0x80, 64, 100], window.performance.now() + 500);      // 1秒後にノートオフ\n        // MIDI メッセージを送信\n        output.send([0x90, 67, 100]);                                       // ノートオン\n        output.send([0x80, 67, 100], window.performance.now() + 500);      // 1秒後にノートオフ\n\n        // outputを登録する\n        this.props.dispatch({type: 'REGISTER_OUTPUT', output: output})\n    }\n\n    constructor(props){\n        super(props)\n\n        // ステートの設定\n        this.state = {\n            message: 'please wait...',\n            inPorts: [],\n            outPorts: [],\n            selectedOutPortID: '',\n            selectedInPortID: '',\n        }\n        \n        navigator.requestMIDIAccess({sysex: true}).then(\n            // 通信成功時\n            (midiAccess) => {                \n                // InPortの取得、設定\n                let inputIterator = midiAccess.inputs.values();\n                let inPorts = []\n                for (let input = inputIterator.next(); !input.done; input = inputIterator.next()) {\n                    let value = input.value;\n                    inPorts.push({\n                        name: value.name,\n                        ID: value.id\n                    })\n                    // イベント登録\n                    value.addEventListener('midimessage', this.inputEvent, false);\n                }\n                if (inPorts.length) this.setState({ selectedInPortID: inPorts[0].ID })\n                this.setState({ inPorts: inPorts })\n\n                // OutPortの取得、設定\n                let outPorts = []\n                this.outputs = midiAccess.outputs\n                for (let output of this.outputs.values()) {\n                    outPorts.push({\n                        device: output,\n                        name: output.name,\n                        ID: output.id\n                    })\n                }\n                if (outPorts.length) {\n                    this.setState({ \n                        selectedOutPortID: outPorts[0].ID\n                    })\n\n                    // outputを登録する\n                    this.props.dispatch({type: 'REGISTER_OUTPUT', output: this.outputs.get(outPorts[0].ID)})\n                }\n                this.setState({ \n                    outPorts: outPorts\n                })\n                \n                console.log(\"MIDI READY!!!\");\n                this.setState({message: \"MIDI READY\"})\n            },\n            // 通信失敗時\n            (msg) => {\n                console.log(\"MIDI FAILED - \" + msg);\n            }\n        )\n\n        this.doClick = this.doClick.bind(this)\n        this.doChange = this.doChange.bind(this)\n        this.inputEvent = this.inputEvent.bind(this)\n    }\n\n    render() {\n        // セレクトタグの内容を作る\n        let n = 0\n        let in_items = this.state.inPorts.map(value =>\n            <option key={n++} value={value.ID}>{value.name} ({value.ID})</option> \n            )\n        let out_items = this.state.outPorts.map(value =>\n            <option key={n++} value={value.ID}>{value.name} ({value.ID})</option> \n            )\n\n        return (\n        <div className='row'>\n            <div className='col-md-3'>\n                <table><tbody>\n                    <tr><td>Input: </td><td><select>{ in_items }</select></td></tr>\n                    <tr><td>Output: </td><td><select onChange={this.doChange} defaultValue=\"-1\">{ out_items }</select></td></tr>\n                </tbody></table>\n            </div>\n            <div className='col-md-3'>\n                <ChordPlayer />\n            </div>\n        </div>\n        )\n    }\n}\n\nexport default connect(state=>state)(Instrument)\n","import  { createStore } from 'redux'\n\n// 初期値\nconst initData = {\n    noteEvents: [\n        \n    ],\n    output: null,\n    mea: 1,\n    channel: 0,\n    channelData: [\n        {\n            program: 0,\n            name: 'Piano'\n        },\n        {\n            program: 0,\n            name: 'Bass'\n        },\n        {\n            program: 0,\n            name: 'Piano'\n        },\n        {\n            program: 0,\n            name: 'Piano'\n        },\n        {\n            program: 0,\n            name: 'Piano'\n        },\n        {\n            program: 0,\n            name: 'Piano'\n        },\n        {\n            program: 0,\n            name: 'Piano'\n        },\n        {\n            program: 0,\n            name: 'Piano'\n        },\n        {\n            program: 0,\n            name: 'Drums'\n        },\n    ]\n}\n\n// 配列のソート\nfunction sortNotes(arr) {\n    arr.sort((a, b) => {\n        if (a.mea < b.mea) return -1\n        if (a.mea > b.mea) return 1\n        if (a.tick < b.tick) return -1\n        if (a.tick > b.tick) return 1\n        if (a.note < b.note) return -1\n        if (a.note > b.note) return 1\n        return 0\n    })\n}\n\n// レデューサ\nexport function midipReducer(state=initData, action) {\n    switch(action.type) {\n    // MIDIイベント管理----------------------------------\n    case 'ADD_EVENT':\n        let new_data = state.noteEvents.slice()\n        new_data.push(action.data)\n        sortNotes(new_data)\n        return {\n            output: state.output,\n            noteEvents: new_data,\n            mea: state.mea,\n            channel: state.channel,\n            channelData: state.channelData\n        }\n    case 'DEL_EVENT':\n        let del_data = state.noteEvents.filter(\n            noteEvent=>(\n                noteEvent.channel != action.data.channel ||\n                noteEvent.mea != action.data.mea ||\n                noteEvent.tick != action.data.tick ||\n                noteEvent.note != action.data.note\n            )\n        )\n        return {\n            output: state.output,\n            noteEvents: del_data,\n            mea: state.mea,\n            channel: state.channel,\n            channelData: state.channelData\n        }\n    case 'DEL_ALL':\n        return {\n            output: state.output,\n            noteEvents: initData.noteEvents,\n            mea: state.mea,\n            channel: state.channel,\n            channelData: state.channelData\n        }\n\n    // MIDIデバイス操作-------------------------------------\n    case 'REGISTER_OUTPUT':\n        return {\n            output: action.output,\n            noteEvents: state.noteEvents,\n            mea: state.mea,\n            channel: state.channel,\n            channelData: state.channelData\n        }\n    case 'NOTE_ON':\n        {\n            let ch = 0\n            if (action.data.channel === undefined) ch = 0\n            else ch = action.data.channel\n            state.output.send([0x90 + ch, action.data.note, action.data.vel])\n            state.output.send([0x80 + ch, action.data.note, action.data.vel], window.performance.now() + action.data.gateMs);      // 1秒後にノートオフ\n            break\n        }\n    case 'ALL_NOTE_OFF':\n        state.output.send([0xB0, 0x7B, 0])\n        break\n    case 'PROGRAM_CHANGE':\n        {\n            const ch = state.channel\n            const num = action.programNumber\n            state.output.send([0xC0 + ch, num])\n            let newChannelData = state.channelData.slice()\n            newChannelData[ch].program = num\n            return {\n                output: state.output,\n                noteEvents: state.noteEvents,\n                mea: state.mea,\n                channel: state.channel,\n                channelData: newChannelData\n            }\n        }\n            \n    // シーケンス操作--------------------------------------\n    case 'MOVE_MEA':\n        let mea = action.mea\n        if (mea > 128) mea = 128\n        if (mea < 1) mea = 1\n        \n        return {\n            output: state.output,\n            noteEvents: state.noteEvents,\n            mea: mea,\n            channel: state.channel,\n            channelData: state.channelData\n        }\n\n    // チャンネル操作-------------------------------------\n    case 'MOVE_CHANNEL':\n        let channel = action.channel\n        if (channel > 15) channel = 15\n        if (channel < 0) channel = 0\n        return {\n            output: state.output,\n            noteEvents: state.noteEvents,\n            mea: state.mea,\n            channel: channel,\n            channelData: state.channelData\n        }\n    default: \n        break\n    }\n    return state\n}\n\n\n// 追加のアクション\nexport function addEvent(data) {\n    return {\n        type: 'ADD_EVENT',\n        data: data\n    }\n}\n\n// ストアを作成\nexport default createStore(midipReducer)","import React, { Component } from 'react'\nimport { addEvent } from './Store'\nimport { connect } from 'react-redux'\n\nclass PianoRollCell extends Component {\n    tdUnselected = {\n        width: '50px'\n    }\n    tdSelected = {\n        width: '50px',\n        background: 'cyan'\n    }\n    border = {\n        borderLeft: '2px solid blue',\n        background: 'cyan'\n    }\n\n    // セルがマウスオーバーされた時\n    doMouseEnter(e) {\n        // シングルモードの時\n        if (this.props.isSingle) {\n            // マウス左クリックが押下状態にある時\n            if ((e.buttons & 0x0001) ? true : false) {\n                console.log('Entered')\n                this.doClick(e)\n            }\n        }\n    }\n\n    // セルがクリックされた時\n    doClick(e) {\n        let tick = e.target.getAttribute('data-col') * 1\n        let note = e.target.getAttribute('data-row') * 1\n        this.setState(state => ({selected: !state.selected}))\n\n        if (this.state.selected){\n            this.props.dispatch({\n                type: 'DEL_EVENT',\n                data: {\n                    channel: this.props.channel,\n                    mea: this.props.mea,\n                    tick: tick,\n                    note: note\n                }\n            })\n        }\n        else {\n            let action = addEvent({\n                channel: this.props.channel,\n                mea: this.props.mea,\n                tick: tick,\n                note: note,\n                gate: 120,\n                vel: 100\n            })\n            this.props.dispatch(action)\n\n            // 単音モードの場合は同じTickの音を消す（遅い実装っぽい、Storeに関数作る？、もしくはindexを取得）\n            if (this.props.isSingle) {\n                // 検索\n                const sameTickEvents = this.props.noteEvents.filter(noteEvent=>(\n                    noteEvent.channel == action.data.channel &&\n                    noteEvent.mea == action.data.mea &&\n                    noteEvent.tick == action.data.tick\n                ))\n\n                // 削除\n                if (sameTickEvents.length > 0) {\n                    sameTickEvents.map((noteEvent)=>{\n                        this.props.dispatch({\n                            type: 'DEL_EVENT',\n                            data: {\n                                channel: this.props.channel,    \n                                mea: this.props.mea,\n                                tick: tick,\n                                note: noteEvent.note\n                            }\n                        })\n                    })\n                }\n            }\n\n            if (this.props.isPreview) {\n                // プレビュー前にNoteOffする\n                this.props.dispatch({\n                    type: 'ALL_NOTE_OFF'\n                })\n                \n                // 音をプレビューする\n                this.props.dispatch({\n                    type: 'NOTE_ON',\n                    data: {\n                        channel: this.props.channel,\n                        note: note,\n                        gateMs: 200,\n                        vel: 100\n                    }\n                })\n            }\n        }\n    }\n\n    constructor(props){\n        super(props)\n\n        // ステートの設定\n        this.state = {\n            selected: false\n        }\n        \n        this.doClick = this.doClick.bind(this)\n        this.doMouseEnter = this.doMouseEnter.bind(this)\n    }\n    \n\n    render() {\n        let noteNum = this.props.row\n        let tick = this.props.col\n\n        // イベントを検索し、見つけたらtrueとする（なんか遅くなりそうな実装）\n        let findData = this.props.noteEvents.find(noteEvent=> (\n            noteEvent.channel == this.props.channel &&\n            noteEvent.mea == this.props.mea &&\n            noteEvent.note == noteNum &&\n            noteEvent.tick == tick\n        ))\n        if (findData === undefined) this.state.selected = false\n        else this.state.selected = true\n\n        return (\n            <td style={this.state.selected ? this.tdSelected : this.tdUnselected}\n            onClick={this.doClick} onMouseEnter={this.doMouseEnter} data-row={noteNum} data-col={tick}>\n                <div style={this.border}></div>\n            </td>\n        )\n    }\n}\n\nexport default connect(state=>state)(PianoRollCell)\n","import React, { Component } from 'react'\nimport PianoRollCell from './PianoRollCell'\nimport { connect } from 'react-redux'\nimport Lib from './Lib'\n\nclass PianoRoll extends Component {\n    // div全体（スクロールできる）\n    box = {\n        height: '500px',\n        overflow: 'auto',\n        cursor: 'pointer',\n        userSelect: 'none'\n    }\n    th = {\n        width: '100px'\n    }\n    \n    changeBaseKey(e) { this.setState({baseNote: e.target.value}) }\n    changeMea(e) { \n        this.props.dispatch({type: 'MOVE_MEA', mea: e.target.value}) \n    }\n    changeSingle(e) {this.setState({isSingle: e.target.checked})}\n    changePreview(e) {this.setState({isPreview: e.target.checked})}\n\n    constructor(props){\n        super(props)\n\n        // ステートの設定\n        this.state = {\n            width : 16,\n            height : 13,\n            baseNote: 72,\n            isSingle: true, // 単音モード\n            isPreview: true, // プレビューするかどうか\n        }\n        \n        this.changeBaseKey = this.changeBaseKey.bind(this)\n        this.changeMea = this.changeMea.bind(this)\n        this.changeSingle = this.changeSingle.bind(this)\n        this.changePreview = this.changePreview.bind(this)\n        this.rollStyle = this.rollStyle.bind(this)\n\n        this.ref = React.createRef()\n    }\n\n    // 読み込み時にピアノロールの中央までスクロールを行う\n    componentDidMount() {\n        this.ref.current.scrollIntoView({\n            block: 'center'\n        })\n    }\n\n    // スケールによってピアノロールの色を変える\n    rollStyle(note) {\n        // スケール（とりあえず、ダイアトニック）\n        const scale = [1,0,1,0,1,1,0,1,0,1,0,1]\n        // スケール外の音\n        const tr_outScale = { background: 'whitesmoke' }\n        // スケール内の音\n        const tr_onScale = { background: 'white' }\n        // 現在の調の音\n        const tr_baseKey = { background: 'mistyrose' }\n        // オフセット\n        const offset = (note - this.state.baseNote + 120) % 12\n\n        if (offset == 0) return tr_baseKey\n        if (scale[offset]) return tr_onScale\n        else return tr_outScale\n    }\n\n    render() {\n        // ダミーの数値（Reactのkeyのため必要？）\n        const notes = []\n        for (let i = 127; i >= 0; i--) {\n            notes.push(i)\n        }\n        const ticks = []\n        for (let i = 1; i <= 16; i++) {\n            ticks.push(i)\n        }\n\n        // ピアノロール生成\n        const rows = notes.map((fuga, indexRow) => {\n            const note = 127 - indexRow\n            return (\n                <tr key={fuga} style={this.rollStyle(note)}>\n                    {/* 音階 */}\n                    <th style={this.th} ref={note == this.state.baseNote ? this.ref : ''}>{Lib.noteNumberToNoteName(note)}</th>\n\n                    {/* 選択できる部分 */}\n                    {ticks.map((hoge, indexCol) => \n                        <PianoRollCell key={hoge} row={note} col={indexCol} isSingle={this.state.isSingle} isPreview={this.state.isPreview} />\n                    )}\n                </tr>\n            )\n        })\n\n        return (\n            <div>\n                {/* ピアノロール表示 */}\n                <div style={this.box}>\n                <table className=\"table table-bordered table-sm\"><tbody>\n                    {rows}\n                </tbody></table>\n                </div>\n\n                {/* 操作部 */}\n                <p>\n                    {/* 調性 */}\n                    <label>Key: </label>\n                    <input type=\"number\" value={this.state.baseNote} min=\"12\" max=\"127\" onChange={(this.changeBaseKey)} />\n                    ({Lib.noteNumberToNoteName(this.state.baseNote)})\n\n                    {/* 小節 */}\n                    <label>Mea: </label>\n                    <input type=\"number\" value={this.props.mea} min=\"1\" max=\"127\" onChange={this.changeMea} />\n\n                    {/* 単音モードボタン */}\n                    <label>Single: </label>\n                    <input type=\"checkbox\" id=\"single\" onChange={this.changeSingle} checked={this.state.isSingle} />\n\n                    {/* プレビューボタン */}\n                    <label>Preview: </label>\n                    <input type=\"checkbox\" id=\"single\" onChange={this.changePreview} checked={this.state.isPreview} />\n                </p>\n\n                \n            </div>\n        )\n    }\n}\n\nexport default connect(state=>state)(PianoRoll)\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport Lib from './Lib'\n\nclass NotePane extends Component {\n    box = {\n        height: '500px',\n        overflow: 'auto'\n    }\n\n    doClick(e) {\n    }\n\n    constructor(props){\n        super(props)\n\n        // ステートの設定\n        this.state = {\n        }\n        \n        this.doClick = this.doClick.bind(this)\n    }\n\n    render() {\n        // 現在のチャンネルのイベントのみを取り出す\n        const channelItem = this.props.noteEvents.filter(noteEvent=>{\n            return noteEvent.channel == this.props.channel\n        })\n\n        // ペインに表示されるテーブルを生成\n        const noteItem = channelItem.map((noteEvent, index)=>(\n            <tr key={index}>\n                <td>{noteEvent.channel}</td>\n                <td>{noteEvent.mea}</td>\n                <td>{noteEvent.tick}</td>\n                <td>{Lib.noteNumberToNoteName(noteEvent.note)}</td>\n                <td>{noteEvent.gate}</td>\n                <td>{noteEvent.vel}</td>\n            </tr>\n        ))\n\n        return (\n            <div style={this.box}>\n                <table className=\"table table-sm\">\n                    <thead>\n                        <tr>\n                            <th>Ch.</th>\n                            <th>Mea</th>\n                            <th>Tick</th>\n                            <th>Event</th>\n                            <th>Gate</th>\n                            <th>Vel/Value</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {noteItem}\n                    </tbody>\n                </table>\n            </div>\n        )\n    }\n}\n\nexport default connect(state=>state)(NotePane)\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport Conductor from './Conductor'\nimport Instrument from './Instrument'\n\nclass Player extends Component {\n\n    constructor(props){\n        super(props)\n\n        // ステートの設定\n        this.state = {\n        }\n        \n    }\n\n    render() {\n        return <div>\n        </div>\n    }\n}\n\nexport default connect(state=>state)(Player)\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport {Player} from './Player'\nimport Lib from './Lib'\nimport { findDOMNode } from 'react-dom'\n\nclass Conductor extends Component {\n    th = {\n        width: '100px'\n    }\n    td = {\n        width: '50px'\n    }\n    tdNow = {\n        width: '50px',\n        background: 'yellow'\n    }\n    maxTick = 16\n\n    PlayToggle() {\n        if (this.state.isPlaying) {\n            this.setState({isPlaying: false})\n            clearTimeout(this.timer)\n        }\n        else {\n            this.setState({isPlaying: true})\n            this.Play()\n            this.timer = setTimeout(this.Proceed,  240 * 1000 / this.state.bpm / this.maxTick )\n        }\n    }\n\n    Play() {\n        // このタイミングで演奏する？ それともストアでやらせるか？\n        // noteを検索\n        const data = this.props.noteEvents.filter(noteEvent=>{\n            if (this.state.isSolo) {\n                return noteEvent.channel == this.props.channel && noteEvent.mea == this.props.mea && noteEvent.tick == this.state.nowTick\n            }\n            else return noteEvent.mea == this.props.mea && noteEvent.tick == this.state.nowTick\n        })\n\n        // 該当するデータがあれば\n        if (data.length > 0) {\n            // 音を鳴らす\n            data.map(d => {\n                this.props.dispatch({\n                    type: 'NOTE_ON',\n                    data: {\n                        channel: d.channel,\n                        note: d.note,\n                        gateMs: 240 * 1000 / this.state.bpm * (d.gate / (480 * 4)) - 1,\n                        vel: d.vel,\n                    }\n                })\n            })\n        }\n    }\n\n    // tickが進むごとに実行される関数\n    Proceed() {\n        // 小節の最後までTickが進んだらmeaを進める\n        let nextTick = this.state.nowTick + 1\n        if (nextTick == this.maxTick) {\n            nextTick %= this.maxTick\n            if (!this.state.isLoop) {\n                // なぜか遅れる（要対処！！！！）\n                this.props.dispatch({ type:'MOVE_MEA', mea: this.props.mea*1 +1 })\n            }\n        }\n        this.setState({ nowTick: nextTick })\n        \n        this.Play()\n        \n        // 小節の終わりの一個前のtickに来たら、delayTimeを少し短くする（無理やりな実装）\n        let delayTime = 240 * 1000 / this.state.bpm / this.maxTick\n        if (nextTick == this.maxTick - 1 && !this.state.isLoop) delayTime -= 80\n        \n        this.timer = setTimeout(this.Proceed, delayTime )\n    }\n\n    ChangeBPM(e) {\n        this.setState({bpm: e.target.value})\n    }\n\n    ChangeLoop(e) {\n        this.setState({isLoop: e.target.checked})\n    }\n\n    ChangeSolo(e) {\n        this.setState({isSolo: e.target.checked})\n    }\n    ChangeTick(e) {\n        this.setState({nowTick: e.target.getAttribute('data-tick')*1})\n    }\n\n    constructor(props){\n        super(props)\n\n        // ステートの設定\n        this.state = {\n            bpm : 60,\n            nowTick: 0,\n            isPlaying: false, // 再生中かどうか\n            isLoop: true, // ループするかどうか\n            isSolo: false // ソロ演奏するかどうか\n        }\n        \n        this.PlayToggle = this.PlayToggle.bind(this)\n        this.Proceed = this.Proceed.bind(this)\n        this.ChangeBPM = this.ChangeBPM.bind(this)\n        this.ChangeLoop = this.ChangeLoop.bind(this)\n        this.ChangeSolo = this.ChangeSolo.bind(this)\n        this.ChangeTick = this.ChangeTick.bind(this)\n    }\n\n    render() {\n        let ticks = []\n        for (let i = 0; i < this.maxTick; i++) {\n            ticks.push(<td key={i} data-tick={i} onClick={this.ChangeTick} style={this.state.nowTick == i ? this.tdNow : this.td}></td>)\n        }\n\n        return (\n            <div>\n                <p>\n                    {/* 再生・停止ボタン（別コンポーネントのほうがいい？） */}\n                    <input type=\"number\" value={this.state.bpm} min=\"0\" max=\"300\" onChange={this.ChangeBPM} />\n                    <button className=\"btn btn-primary\" onClick={this.PlayToggle}>\n                        {this.state.isPlaying ? 'Playing' : 'Play'}\n                    </button>\n\n                    {/* ループボタン */}\n                    <label>Loop: </label>\n                    <input type=\"checkbox\" id=\"loop\" onChange={this.ChangeLoop} checked={this.state.isLoop}/>\n\n                    {/* ソロボタン */}\n                    <label>Solo: </label>\n                    <input type=\"checkbox\" id=\"solo\" onChange={this.ChangeSolo} checked={this.state.isSolo}/>\n                </p>\n\n                {/* シーケンスクリック（横に流れていくやつ）表示 */}\n                <table className=\"table table-bordered table-sm\"><tbody><tr>\n                    <th style={this.th}>4/4</th>\n                    {ticks}\n                </tr></tbody></table>\n            </div>\n        )\n    }\n}\n\nexport default connect(state=>state)(Conductor)\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\nclass ChannelSelector extends Component {\n\n    // テストで音を鳴らす\n    ChangeSelector(e) {\n        this.props.dispatch({\n            type: 'MOVE_CHANNEL',\n            channel: e.target.value*1\n        })\n    }\n\n    constructor(props){\n        super(props)\n        this.channelName = ['Piano', 'Bass', 'Piano','Piano','Piano','Piano','Piano','Piano','Piano','Piano','Piano','Drums']\n\n        // ステートの設定\n        this.state = {\n        }\n\n        this.ChangeSelector = this.ChangeSelector.bind(this)\n    }\n\n    render() {\n        // セレクトタグの内容を作る\n        let n = 0\n        let items = this.props.channelData.map(value =>\n            <option key={n} value={n}>Ch.{n++} {value.name}</option> \n        )\n\n        return (\n            <select onChange={this.ChangeSelector} defaultValue=\"-1\">{ items }</select>\n        )\n    }\n}\n\nexport default connect(state=>state)(ChannelSelector)\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\nclass ProgramChanger extends Component {\n\n    // テストで音を鳴らす\n    ChangeSelector(e) {\n        this.props.dispatch({\n            type: 'PROGRAM_CHANGE',\n            programNumber: e.target.value*1\n        })\n    }\n\n    constructor(props){\n        super(props)\n        this.programName = [\n            \"Piano 1\",\n\t        \"Piano 2\",\n\t        \"Piano 3\",\n\t        \"Honkey-tonk\",\n\t        \"E.Piano 1\",\n\t        \"E.Piano 2\",\n\t        \"Harpsichord\",\n\t        \"Clav.\",\n\t        \"Celesta\",\n\t        \"Glockenspiel\",\n\t        \"Music Box\",\n\t        \"Vibraphone\",\n\t        \"Marimba\",\n\t        \"Xylophone\",\n\t        \"Tubular Bells\",\n\t        \"Dulcrimer\",\n\t        \"Organ 1\",\n\t        \"Organ 2\",\n\t        \"Organ 3\",\n\t        \"Pipe Organ\",\n\t        \"Reed Organ\",\n\t        \"Accordion\",\n\t        \"Harmonica\",\n\t        \"Bandneon\",\n\t        \"Nylon-str.Guitar\",\n\t        \"Steel-str.Gt\",\n\t        \"Jazz Guitar\",\n\t        \"Clean Guitar\",\n\t        \"Muted Guitar\",\n\t        \"Overdrive Guitar\",\n\t        \"Distortion Guitar\",\n\t        \"Gt.Harmonics\",\n\t        \"Acoustic Bass\",\n\t        \"Fingered Bass\",\n\t        \"Picked Bass\",\n\t        \"Fretless Bass\",\n\t        \"Slap Bass 1\",\n\t        \"Slap Bass 2\",\n\t        \"Synth Bass 1\",\n\t        \"Synth Bass 2\",\n\t        \"Violin\",\n\t        \"Viola\",\n\t        \"Cello\",\n\t        \"Contrabass\",\n\t        \"Tremolo Strings\",\n\t        \"Pizzicato Strings\",\n\t        \"Harp\",\n\t        \"Timpani\",\n\t        \"Strings\",\n\t        \"Slow Strings\",\n\t        \"Synth Strings 1\",\n\t        \"Synth Strings 2\",\n\t        \"Chor Aahs\",\n\t        \"Voice Oohs\",\n\t        \"Synth Vox\",\n\t        \"OrchestraHit\",\n\t        \"Trumpet\",\n\t        \"Trombone\",\n\t        \"Tuba\",\n\t        \"MutedTrumpet\",\n\t        \"French Horns\",\n\t        \"Brass 1\",\n\t        \"Synth Brass 1\",\n\t        \"Synth Brass 2\",\n\t        \"Soprano Sax\",\n\t        \"Alto Sax\",\n\t        \"Tenor Sax\",\n\t        \"Baritone Sax\",\n\t        \"Oboe\",\n\t        \"English Horn\",\n\t        \"Bassoon\",\n\t        \"Clarinet\",\n\t        \"Piccolo\",\n\t        \"Flute\",\n\t        \"Recorder\",\n\t        \"Pan Flute\",\n\t        \"Bottle Blow\",\n\t        \"Shakuhachi\",\n\t        \"Whistle\",\n\t        \"Ocarina\",\n\t        \"Square Wave\",\n\t        \"Saw Wave\",\n\t        \"Synth Calliope\",\n\t        \"Chiffer Lead\",\n\t        \"Charang\",\n\t        \"Solo Vox\",\n\t        \"5th Saw Wave\",\n\t        \"Bass & Lead\",\n\t        \"Fantasia\",\n\t        \"Warm Pad\",\n\t        \"Polysynth\",\n\t        \"Space Voice\",\n\t        \"Bowed Glass\",\n\t        \"Metal Pad\",\n\t        \"Halo Pad\",\n\t        \"Sweep Pad\",\n\t        \"Ice Rain\",\n\t        \"SoundTrack\",\n\t        \"Crystal\",\n\t        \"Atomosphere\",\n\t        \"Brightness\",\n\t        \"Goblin\",\n\t        \"Echo Drops\",\n\t        \"Star Theme\",\n\t        \"Sitar\",\n\t        \"Banjo\",\n\t        \"Shamisen\",\n\t        \"Koto\",\n\t        \"Kalimba\",\n\t        \"Bagpipe\",\n\t        \"Fiddle\",\n\t        \"Shenai\",\n\t        \"Tinkle Bell\",\n\t        \"Agogo\",\n\t        \"Steel Drums\",\n\t        \"Woodblock\",\n\t        \"Taiko\",\n\t        \"Melodic Tom\",\n\t        \"Synth Drum\",\n\t        \"Reverse Sym\",\n\t        \"Gt.FretNoise\",\n\t        \"Breath Noise\",\n\t        \"Seashore\",\n\t        \"Bird\",\n\t        \"Telephone\",\n\t        \"Helicopter\",\n\t        \"Applause\",\n\t        \"Gun Shot\",\n        ]\n\n        // ステートの設定\n        this.state = {\n        }\n\n        this.ChangeSelector = this.ChangeSelector.bind(this)\n    }\n\n    render() {\n        // セレクトタグの内容を作る\n        let n = 0\n        let items = this.programName.map(value =>\n            <option key={n} value={n}>{n++}. {value}</option> \n        )\n\n        return (\n            <select onChange={this.ChangeSelector} value={this.props.channelData[this.props.channel].program}>{ items }</select>\n        )\n    }\n}\n\nexport default connect(state=>state)(ProgramChanger)\n","import React, { Component } from 'react'\nimport PianoRoll from './PianoRoll'\nimport NotePane from './NotePane'\nimport { connect } from 'react-redux'\nimport Conductor from './Conductor'\nimport Player from './Player'\nimport ChannelSelector from './ChannelSelector'\nimport ProgramChanger from './ProgramChanger'\n\nclass Sequencer extends Component {\n    doClick(e) {\n        this.props.dispatch({\n            type: 'DEL_ALL'\n        })\n    }\n\n    constructor(props){\n        super(props)\n\n        // ステートの設定\n        this.state = {\n        }\n        \n        this.doClick = this.doClick.bind(this)\n    }\n\n\n\n    render() {\n        return <div>\n            <div className='row mt-4'>\n                <div className='col-md-3'>\n                    <div>\n                        <ChannelSelector />\n                        <ProgramChanger />\n                    </div>\n                    <NotePane />\n                </div>\n                <div className='col-md-9'>\n                    <Conductor />\n                    <PianoRoll />\n                </div>\n                <Player />\n            </div>\n            \n            <div className='row'>\n                <button className='btn btn-danger' onClick={this.doClick}>Del All Event</button>\n            </div>\n        </div>\n    }\n}\n\nexport default connect(state=>state)(Sequencer)\n","import './App.css'\nimport React, { Component } from 'react'\nimport Instrument from './midip/Instrument'\nimport Sequencer from './midip/Sequencer'\nimport { Provider } from 'react-redux'\nimport MidipStore, { midipReducer } from './midip/Store'\nimport { createStore } from 'redux'\n\nimport { persistStore, persistReducer } from 'redux-persist'\nimport { PersistGate } from 'redux-persist/integration/react'\nimport storage from 'redux-persist/lib/storage'\n\n// Redux Persistの設定\nconst persistConfig = {\n    key: 'midip',\n    storage: storage,\n    blacklist: ['output'],\n    whitelist: ['noteEvents','channelData']\n}\n\n// パーシストレデューサの設定\nconst persistedReducer = persistReducer(persistConfig, midipReducer)\n\n// ストア、パーシスタの作成\nlet store = createStore(persistedReducer)\nlet pstore = persistStore(store)\n\nclass App extends Component {\n    constructor(props){\n        super(props)\n    }\n\n    render() {\n    return (\n        <div className=\"container-fluid\">\n            <Provider store={store}>\n                <PersistGate loading={<p>loading...</p>} persistor={pstore}>\n                    <Sequencer />\n                    <hr />\n                    <Instrument />\n                </PersistGate>\n            </Provider>\n\n            <hr />\n\n            <h4>Memo</h4>\n            <li><a href=\"https://github.com/syun560/midip2021\">GitHub</a></li>\n\n            <h5>目的</h5>\n            <li>自動耳コピ</li>\n            <li>公開、使ってもらえること</li>\n            <li>タブ譜作成</li>\n            <li>MIDI出力</li>\n            <li></li>\n\n            <li>コンソールにMIDIメッセージは出力できているので、インタラクティブな出力をする</li>\n            \n            <li>Program Changeのイベントも送信できるようにしよう、セレクトタグか？</li>\n\n            <li>キーボードショートカット</li>\n\n            <h4>参考</h4>\n            <li><a href=\"http://www.yk.rim.or.jp/~kamide/music/chordhelper/\">MIDI Chord Helper</a></li>\n            <li><a href=\"https://musiclab.chromeexperiments.com/Song-Maker/song/5766211904733184\">Song Maker</a></li>\n            <li>KORG-DS-10</li>\n            <li><a href=\"http://www2.odn.ne.jp/~cbu69490/MIDI/MIDIlect/MIDIlect3.html\">MIDIメッセージの分類</a></li>\n        </div>\n    )\n    }\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n\n    <App />,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}